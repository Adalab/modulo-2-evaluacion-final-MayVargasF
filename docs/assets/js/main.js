"use strict";const listAnime=document.querySelector(".js_list_anime"),searchBtn=document.querySelector(".js_searchBtn"),searchInput=document.querySelector(".js_searchInput"),favList=document.querySelector(".js_fav_list");let animes=[],favorites=[];function favStorage(){const e=JSON.parse(localStorage.getItem("favData"));favList.innerHTML=e?html:""}const handleClickSearch=e=>{e.preventDefault();const t=searchInput.value.toLowerCase(),i=animes.filter(e=>e.title.toLowerCase().includes(t));console.log(i),renderAnimes(i)};function handleClickAnime(e){const t=e.currentTarget.id,i=animes.find(e=>e.mal_id.toString()===t.toString()),n=favorites.findIndex(e=>e.mal_id.toString()===t.toString());-1===n?favorites.push(i):favorites.splice(n,1),localStorage.setItem("favData",JSON.stringify(favorites)),renderAnimes(animes)}function listenerAnimes(){const e=document.querySelectorAll(".js_eachAnime");for(const t of e)t.addEventListener("click",handleClickAnime)}function renderAnimes(e){let t="",i="";for(const n of e){i=-1!==favorites.findIndex(e=>n.mal_id===e.mal_id)?"animeList--favorite":"",t+=`<li class="js_eachAnime ${i}" id="${n.mal_id}">`,t+='<div class="animeContainer">',t+=`<h3>${n.title}</h3>`,t+=`<img src=${imagePlaceholder(n)} alt="${n.title} cover"/>`,t+="</div></li>"}listAnime.innerHTML=t,listenerAnimes()}function imagePlaceholder(e){if("https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==e.images.jpg.image_url)return e.images.jpg.image_url}function getDataApi(){fetch("https://api.jikan.moe/v4/anime").then(e=>e.json()).then(e=>{animes=e.data,console.log(animes),renderAnimes(animes)})}searchBtn.addEventListener("click",handleClickSearch),getDataApi();